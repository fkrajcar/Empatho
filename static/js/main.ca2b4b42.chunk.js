(this["webpackJsonptest-face-api"]=this["webpackJsonptest-face-api"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),s=a(20),c=a.n(s),i=(a(51),a(9)),o=a.n(i),m=a(14),l=a(39),E=a(40),S=a(45),u=a(44),p=a(12),I=a(43),d=a(15),h=a(41),g=a.n(h),v=a(26),f=a(11),T=a.n(f),R=a(25),N=a(23),x=a(42),_=a.n(x),O=(a(99),a(100),a(4)),M=function(e){Object(S.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).getFullFaceDescription=function(){var e=Object(m.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.c(t);case 2:return a=e.sent,e.next=5,p.b(a,new p.a).withFaceExpressions();case 5:void 0!==(n=e.sent)&&(s=Object.keys(n.expressions).reduce((function(e,t){return n.expressions[e]>n.expressions[t]?e:t})),r.setState({detectedExpression:s}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.checkCorrect=function(){var e=r.state.detectedExpression,t=r.state,a=t.gameScore,n=t.randomExpression;if(e===n){a+=1;for(var s=T()(O.EXPRESSIONS);n===s&&n===e;)s=T()(O.EXPRESSIONS);n=s,r.setState({isCorrect:!0,gameScore:a,randomExpression:n}),setTimeout((function(){r.setState({isCorrect:!1})}),1500)}},r.loadModels=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.e(O.MODEL_URL);case 2:return e.next=4,p.d(O.MODEL_URL);case 4:case"end":return e.stop()}}),e)}))),r.gameLogicStart=function(){var e=r.state,t=e.gameTimerIntervalID,a=e.correctEmotionTimerIntervalID,n=e.gameCorrectEmotionTimer,s=e.gameTimer,c=e.randomExpression,i=r.state.detectedExpression;r.setState({gameScore:0}),a=setInterval((function(){0===n?r.setState({gameCorrectEmotionTimer:5,correctEmotionTimerIntervalID:a}):(n-=1,r.setState({gameCorrectEmotionTimer:n}))}),O.TIMER_INTERVAL_MS),t=setInterval((function(){if(0===s)r.setState({hasFinished:!0}),r.gameLogicStop();else{if(s-=1,r.checkCorrect(),s%10===0){for(var e=T()(O.EXPRESSIONS);c===e&&c===i;)e=T()(O.EXPRESSIONS);c=e,r.setState({randomExpression:c})}r.setState({gameTimer:s})}}),O.TIMER_INTERVAL_MS),r.setState({gameTimerIntervalID:t,correctEmotionTimerIntervalID:a})},r.gameLogicStop=function(){var e=r.state,t=e.gameTimerIntervalID,a=e.correctEmotionTimerIntervalID,n=e.intervalID;clearInterval(n),clearInterval(t),clearInterval(a),r.setState({hasStarted:!1,startingTimer:3})},r.startGame=function(){var e=r.state.hasStarted,t=r.state,a=t.startingTimer,n=t.intervalID;e?r.gameLogicStop():(r.setState({gameTimer:60,gameScore:0}),n=setInterval((function(){0===a?(r.gameLogicStart(),clearInterval(n)):(a-=1,r.setState({startingTimer:a}))}),O.TIMER_INTERVAL_MS),r.setState({hasStarted:!e,intervalID:n}))},r.closeModal=function(){r.setState({hasFinished:!1})},r.startCapturing=function(){setInterval((function(){var e=r.webcam.current.getScreenshot();r.getFullFaceDescription(e)}),O.EXPRESSION_DETECTION_INTERVAL_MS)},r.fullFaceDescriptions=null,r.canvas=n.a.createRef(),r.canvasPicWebCam=n.a.createRef(),r.webcam=n.a.createRef(),r.state={hasStarted:!1,isCorrect:!1,hasFinished:!1,detectedExpression:"neutral",randomExpression:T()(O.EXPRESSIONS),startingTimer:3,intervalID:null,gameTimerIntervalID:null,correctEmotionTimerIntervalID:null,gameCorrectEmotionTimer:5,gameTimer:60,gameScore:0,isLoading:!0},r}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadModels().then((function(){t.startCapturing(),t.setState({isLoading:!1})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasFinished,a=e.detectedExpression,r=e.hasStarted,s=e.startingTimer,c=e.randomExpression,i=e.gameTimer,o=e.gameScore,m=e.isCorrect,l=e.isLoading;return n.a.createElement(I.a,null,n.a.createElement("div",{className:r?"webcam-faces hasStarted":"webcam-faces"},n.a.createElement(g.a,{className:"webcam",audio:!1,width:O.WEBCAM_WIDTH,height:O.WEBCAM_HEIGHT,ref:this.webcam,screenshotFormat:"image/jpeg",videoConstraints:O.VIDEO_CONSTRAINTS}),n.a.createElement("div",{style:{display:"none"}},n.a.createElement("canvas",{ref:this.canvasPicWebCam,width:O.WEBCAM_WIDTH,height:O.WEBCAM_HEIGHT})),n.a.createElement("div",{className:r?"emoji-timer-container hasStarted":"emoji-timer-container"},r&&0!==s?n.a.createElement("p",{className:"timer"},s):n.a.createElement(d.a,{className:r?"emoji hasStarted":"emoji",src:m?"".concat(O.IMAGES_URL,"check-circle-regular.svg"):"".concat(O.IMAGES_URL).concat(c,".png")}))),n.a.createElement("div",{className:"current_expression-container"},n.a.createElement("div",{className:"spacer"}),n.a.createElement(d.a,{className:"current_expression-emoji",src:"".concat(O.IMAGES_URL).concat(a,".png")}),n.a.createElement("div",{className:r?"game-info":"game-info is-hidden"},n.a.createElement("div",{className:"timer padding-b-30"},n.a.createElement(N.a,{icon:R.b})," ",n.a.createElement("span",{className:"timer-text"},"Vrijeme: ".concat(i))),n.a.createElement("div",{className:"timer padding-0"},n.a.createElement(N.a,{icon:R.a})," ",n.a.createElement("span",{className:"timer-text"},"Rezultat: ".concat(o))))),n.a.createElement("div",{className:"controls"},!l&&n.a.createElement(v.a,{variant:r?"danger":"primary",onClick:this.startGame},r?"Zaustavi igru":"Pokreni igru")),n.a.createElement(_.a,{isOpen:t,onRequestClose:this.closeModal,style:O.CUSTOM_MODAL_STYLE},n.a.createElement(d.a,{className:"emoji emoji-modal",src:"".concat(O.IMAGES_URL,"happy.png")}),n.a.createElement("h3",null,"Bravo."),n.a.createElement("h4",null,"Ostvareni broj bodova:"),n.a.createElement("h3",null,o),n.a.createElement(v.a,{onClick:this.closeModal},"ZATVORITI")))}}]),a}(r.Component);c.a.render(n.a.createElement(M,null),document.getElementById("root"))},4:function(e,t){e.exports.WEBCAM_HEIGHT=480,e.exports.WEBCAM_WIDTH=480,e.exports.EXPRESSION_DETECTION_INTERVAL_MS=250,e.exports.TIMER_INTERVAL_MS=1e3,e.exports.EXPRESSIONS_ANGRY="angry",e.exports.EXPRESSIONS_HAPPY="happy",e.exports.EXPRESSIONS_NEUTRAL="neutral",e.exports.EXPRESSIONS_SAD="sad",e.exports.EXPRESSIONS_SURPRISED="surprised",e.exports.EXPRESSIONS=[this.EXPRESSIONS_ANGRY,this.EXPRESSIONS_HAPPY,this.EXPRESSIONS_NEUTRAL,this.EXPRESSIONS_SAD,this.EXPRESSIONS_SURPRISED],e.exports.VIDEO_CONSTRAINTS={width:this.WEBCAM_WIDTH,height:this.WEBCAM_HEIGHT,facingMode:"user"},e.exports.MODEL_URL="".concat("/Empatho","/models"),e.exports.IMAGES_URL="".concat("/Empatho","/img/"),e.exports.CUSTOM_MODAL_STYLE={content:{top:"200px",left:"350px",right:"350px",bottom:"200px",display:"flex","flex-direction":"column","justify-content":"space-between","text-align":"center"}}},46:function(e,t,a){e.exports=a(101)},51:function(e,t,a){},58:function(e,t){},59:function(e,t){},60:function(e,t){}},[[46,1,2]]]);
//# sourceMappingURL=main.ca2b4b42.chunk.js.map