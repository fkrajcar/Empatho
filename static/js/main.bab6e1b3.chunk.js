(this["webpackJsonptest-face-api"]=this["webpackJsonptest-face-api"]||[]).push([[0],{27:function(e,t,a){e.exports=a(48)},3:function(e,t){e.exports.WEBCAM_HEIGHT=480,e.exports.WEBCAM_WIDTH=480,e.exports.EXPRESSION_DETECTION_INTERVAL_MS=250,e.exports.TIMER_INTERVAL_MS=1e3,e.exports.VIDEO_CONSTRAINTS={width:this.WEBCAM_WIDTH,height:this.WEBCAM_HEIGHT,facingMode:"user"},e.exports.MODEL_URL="/models",e.exports.IMAGES_URL="./img/"},32:function(e,t,a){},40:function(e,t){},41:function(e,t){},42:function(e,t){},45:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(19),c=a.n(s),i=(a(32),a(8)),o=a.n(i),u=a(13),m=a(20),l=a(21),E=a(26),p=a(24),d=a(7),f=a(23),h=a(17),v=a(22),_=a.n(v),I=a(25),S=(a(44),a(45),a(3)),x=function(e){Object(E.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getFullFaceDescription=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c(t);case 2:return a=e.sent,e.next=5,d.b(a,new d.a).withFaceExpressions();case 5:void 0!==(r=e.sent)?(console.log(r.expressions),s=Object.keys(r.expressions).reduce((function(e,t){return r.expressions[e]>r.expressions[t]?e:t})),n.setState({isDetected:!0,detectedExpression:s})):n.setState({isDetected:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadModels=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.e("/Empatho"+S.MODEL_URL);case 2:return e.next=4,d.f.tinyFaceDetector.loadFromUri("/Empatho"+S.MODEL_URL);case 4:return e.next=6,d.d("/Empatho"+S.MODEL_URL);case 6:return e.next=8,d.f.faceExpressionNet.loadFromUri("/Empatho"+S.MODEL_URL);case 8:case"end":return e.stop()}}),e)}))),n.startGame=function(){var e=n.state.hasStarted,t=n.state.startingTimer;n.setState({hasStarted:!e});var a=setInterval((function(){1===t&&clearInterval(a),t-=1,n.setState({startingTimer:t})}),S.TIMER_INTERVAL_MS)},n.startCapturing=function(){setInterval((function(){var e=n.webcam.current.getScreenshot();n.getFullFaceDescription(e)}),S.EXPRESSION_DETECTION_INTERVAL_MS)},n.fullFaceDescriptions=null,n.canvas=r.a.createRef(),n.canvasPicWebCam=r.a.createRef(),n.webcam=r.a.createRef(),n.state={isLoading:!0,isDetected:!1,hasStarted:!1,detectedExpression:"neutral",startingTimer:3},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadModels().then((function(){t.startCapturing()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){var n=this.state;n.hasStarted,n.startingTimer;console.log(e.startingTimer)}},{key:"render",value:function(){var e=this.state,t=(e.isDetected,e.detectedExpression),a=(e.isLoading,e.hasStarted),n=e.startingTimer;return console.log(n),r.a.createElement(f.a,null,r.a.createElement("div",{className:a?"webcam-faces hasStarted":"webcam-faces"},r.a.createElement(_.a,{className:"webcam",audio:!1,width:S.WEBCAM_WIDTH,height:S.WEBCAM_HEIGHT,ref:this.webcam,screenshotFormat:"image/jpeg",videoConstraints:S.VIDEO_CONSTRAINTS}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement("canvas",{ref:this.canvasPicWebCam,width:S.WEBCAM_WIDTH,height:S.WEBCAM_HEIGHT})),r.a.createElement("div",{className:a?"emoji-timer-container hasStarted":"emoji-timer-container"},a&&0!==n?r.a.createElement("p",{className:"timer"},n):r.a.createElement(h.a,{className:a?"emoji hasStarted":"emoji",src:"".concat(S.IMAGES_URL).concat(t,".png")}))),r.a.createElement("div",{className:"current_expression-container"},r.a.createElement(h.a,{className:"current_expression-emoji",src:"".concat(S.IMAGES_URL).concat(t,".png")})),r.a.createElement("div",{className:"controls"},r.a.createElement(I.a,{variant:"primary",onClick:this.startGame},"Start game")))}}]),a}(n.Component);c.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.bab6e1b3.chunk.js.map