(this["webpackJsonptest-face-api"]=this["webpackJsonptest-face-api"]||[]).push([[0],{3:function(e,t){e.exports.WEBCAM_HEIGHT=480,e.exports.WEBCAM_WIDTH=480,e.exports.EXPRESSION_DETECTION_INTERVAL_MS=250,e.exports.TIMER_INTERVAL_MS=1e3,e.exports.EXPRESSIONS_ANGRY="angry",e.exports.EXPRESSIONS_HAPPY="happy",e.exports.EXPRESSIONS_NEUTRAL="neutral",e.exports.EXPRESSIONS_SAD="sad",e.exports.EXPRESSIONS_SURPRISED="surprised",e.exports.EXPRESSIONS=[this.EXPRESSIONS_ANGRY,this.EXPRESSIONS_HAPPY,this.EXPRESSIONS_NEUTRAL,this.EXPRESSIONS_SAD,this.EXPRESSIONS_SURPRISED],e.exports.VIDEO_CONSTRAINTS={width:this.WEBCAM_WIDTH,height:this.WEBCAM_HEIGHT,facingMode:"user"},e.exports.MODEL_URL="".concat("/Empatho","/models"),e.exports.IMAGES_URL="".concat("/Empatho","/img/")},37:function(e,t,a){e.exports=a(84)},42:function(e,t,a){},50:function(e,t){},51:function(e,t){},52:function(e,t){},81:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),s=a(29),i=a.n(s),c=(a(42),a(8)),o=a.n(c),m=a(13),E=a(30),S=a(31),l=a(36),u=a(34),I=a(11),p=a(33),d=a(20),g=a(32),T=a.n(g),h=a(35),v=a(14),f=a.n(v),R=(a(80),a(81),a(3)),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).getFullFaceDescription=function(){var e=Object(m.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.c(t);case 2:return a=e.sent,e.next=5,I.b(a,new I.a).withFaceExpressions();case 5:void 0!==(n=e.sent)?(console.log(n.expressions),s=Object.keys(n.expressions).reduce((function(e,t){return n.expressions[e]>n.expressions[t]?e:t})),r.setState({isDetected:!0,detectedExpression:s})):r.setState({isDetected:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadModels=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.e(R.MODEL_URL);case 2:return e.next=4,I.d(R.MODEL_URL);case 4:case"end":return e.stop()}}),e)}))),r.gameLogicStart=function(){var e=r.state,t=e.gameTimerIntervalID,a=e.correctEmotionTimerIntervalID,n=e.gameCorrectEmotionTimer,s=(e.gameScore,e.gameTimer),i=e.randomExpression;r.setState({gameScore:0}),a=setInterval((function(){0===n?r.setState({gameCorrectEmotionTimer:5}):(n-=1,console.log(n),r.setState({gameCorrectEmotionTimer:n}))}),R.TIMER_INTERVAL_MS),t=setInterval((function(){if(0===s)r.gameLogicStop();else{if((s-=1)%5===0){for(var e=f()(R.EXPRESSIONS);i===e;)e=f()(R.EXPRESSIONS);i=e}r.setState({gameTimer:s,randomExpression:i})}}),R.TIMER_INTERVAL_MS),r.setState({gameTimerIntervalID:t,correctEmotionTimerIntervalID:a})},r.gameLogicStop=function(){var e=r.state,t=e.gameTimerIntervalID,a=e.correctEmotionTimerIntervalID;e.gameCorrectEmotionTimer,e.gameScore,e.gameTimer;clearInterval(t),clearInterval(a),r.setState({gameTimer:60,hasStarted:!1})},r.startGame=function(){var e=r.state.hasStarted,t=r.state,a=t.startingTimer,n=t.intervalID;e?(r.gameLogicStop(),clearInterval(n),r.setState({hasStarted:!e,startingTimer:3})):(n=setInterval((function(){0===a?(r.gameLogicStart(),clearInterval(n)):(a-=1,r.setState({startingTimer:a}))}),R.TIMER_INTERVAL_MS),r.setState({hasStarted:!e,intervalID:n}))},r.startCapturing=function(){setInterval((function(){var e=r.webcam.current.getScreenshot();r.getFullFaceDescription(e)}),R.EXPRESSION_DETECTION_INTERVAL_MS)},r.fullFaceDescriptions=null,r.canvas=n.a.createRef(),r.canvasPicWebCam=n.a.createRef(),r.webcam=n.a.createRef(),r.state={isLoading:!0,isDetected:!1,hasStarted:!1,detectedExpression:"neutral",randomExpression:f()(R.EXPRESSIONS),startingTimer:3,intervalID:null,gameTimerIntervalID:null,correctEmotionTimerIntervalID:null,gameCorrectEmotionTimer:5,gameTimer:60,gameScore:0},r}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadModels().then((function(){t.startCapturing()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){var r=this.state;r.hasStarted,r.startingTimer}},{key:"render",value:function(){var e=this.state,t=(e.isDetected,e.detectedExpression),a=(e.isLoading,e.hasStarted),r=e.startingTimer,s=e.randomExpression;return n.a.createElement(p.a,null,n.a.createElement("div",{className:a?"webcam-faces hasStarted":"webcam-faces"},n.a.createElement(T.a,{className:"webcam",audio:!1,width:R.WEBCAM_WIDTH,height:R.WEBCAM_HEIGHT,ref:this.webcam,screenshotFormat:"image/jpeg",videoConstraints:R.VIDEO_CONSTRAINTS}),n.a.createElement("div",{style:{display:"none"}},n.a.createElement("canvas",{ref:this.canvasPicWebCam,width:R.WEBCAM_WIDTH,height:R.WEBCAM_HEIGHT})),n.a.createElement("div",{className:a?"emoji-timer-container hasStarted":"emoji-timer-container"},a&&0!==r?n.a.createElement("p",{className:"timer"},r):n.a.createElement(d.a,{className:a?"emoji hasStarted":"emoji",src:"".concat(R.IMAGES_URL).concat(s,".png")}))),n.a.createElement("div",{className:"current_expression-container"},n.a.createElement(d.a,{className:"current_expression-emoji",src:"".concat(R.IMAGES_URL).concat(t,".png")})),n.a.createElement("div",{className:"controls"},n.a.createElement(h.a,{variant:a?"danger":"primary",onClick:this.startGame},a?"Stop game":"Start game")))}}]),a}(r.Component);i.a.render(n.a.createElement(_,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.03c02f8a.chunk.js.map